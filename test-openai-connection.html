<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Conex√£o OpenAI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
</head>
<body class="bg-gray-900 text-white p-8">
    <div class="max-w-2xl mx-auto">
        <h1 class="text-3xl font-bold text-green-400 mb-6">
            <i class="fas fa-plug mr-3"></i>Teste de Conex√£o OpenAI
        </h1>
        
        <div class="bg-gray-800 rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-blue-400 mb-4">Configura√ß√£o Atual:</h2>
            <div class="space-y-2 text-sm font-mono">
                <div><span class="text-gray-400">API Key:</span> <span class="text-green-400">sk-proj-tcb***...mMAA</span> ‚úÖ</div>
                <div><span class="text-gray-400">URL:</span> <span class="text-blue-400">https://api.openai.com/v1/chat/completions</span></div>
                <div><span class="text-gray-400">Modelo:</span> <span class="text-yellow-400">gpt-4o-mini</span></div>
            </div>
        </div>
        
        <button onclick="testConnection()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold mb-4">
            <i class="fas fa-play mr-2"></i>Testar Conex√£o
        </button>
        
        <div id="result" class="bg-gray-800 rounded-lg p-4 min-h-[100px]">
            <p class="text-gray-400">Clique no bot√£o para testar a conex√£o...</p>
        </div>
    </div>

    <script>
        async function testConnection() {
            const resultDiv = document.getElementById('result');
            const button = document.querySelector('button');
            
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testando...';
            
            resultDiv.innerHTML = `
                <div class="flex items-center text-blue-400">
                    <i class="fas fa-spinner fa-spin mr-2"></i>
                    Conectando com OpenAI...
                </div>
            `;
            
            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Bearer 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',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'gpt-4o-mini',
                        messages: [
                            {
                                role: 'system',
                                content: 'Voc√™ √© um assistente de teste da Academia Nexialista. Responda apenas: "Conex√£o funcionando perfeitamente!"'
                            },
                            {
                                role: 'user',
                                content: 'Teste de conex√£o'
                            }
                        ],
                        max_tokens: 50,
                        temperature: 0.7
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const aiResponse = data.choices[0].message.content;
                    
                    resultDiv.innerHTML = `
                        <div class="space-y-3">
                            <div class="flex items-center text-green-400">
                                <i class="fas fa-check-circle mr-2"></i>
                                <strong>Conex√£o Bem-sucedida!</strong>
                            </div>
                            <div class="bg-green-900/20 border border-green-500/30 rounded p-3">
                                <div class="text-green-300 font-semibold mb-1">Resposta da IA:</div>
                                <div class="text-green-100">"${aiResponse}"</div>
                            </div>
                            <div class="text-sm text-gray-400">
                                ‚úÖ API Key v√°lida<br>
                                ‚úÖ Modelo gpt-4o-mini funcionando<br>
                                ‚úÖ Sistema pronto para uso!
                            </div>
                        </div>
                    `;
                } else {
                    const errorData = await response.json();
                    throw new Error(`API Error: ${response.status} - ${errorData.error?.message || 'Erro desconhecido'}`);
                }
                
            } catch (error) {
                console.error('Erro na conex√£o:', error);
                
                resultDiv.innerHTML = `
                    <div class="space-y-3">
                        <div class="flex items-center text-red-400">
                            <i class="fas fa-exclamation-circle mr-2"></i>
                            <strong>Erro na Conex√£o</strong>
                        </div>
                        <div class="bg-red-900/20 border border-red-500/30 rounded p-3">
                            <div class="text-red-300 font-semibold mb-1">Detalhes do Erro:</div>
                            <div class="text-red-100 text-sm">${error.message}</div>
                        </div>
                        <div class="text-sm text-yellow-300">
                            üí° Poss√≠veis solu√ß√µes:<br>
                            ‚Ä¢ Verifique se a API Key est√° correta<br>
                            ‚Ä¢ Confirme que h√° cr√©ditos na conta OpenAI<br>
                            ‚Ä¢ Tente novamente em alguns segundos
                        </div>
                    </div>
                `;
            } finally {
                button.disabled = false;
                button.innerHTML = '<i class="fas fa-redo mr-2"></i>Testar Novamente';
            }
        }
    </script>
</body>
</html>